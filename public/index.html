<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="UTF-8">
    <meta name = "viewport" content = "width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content = "ie=edge">

    <!-- CSS only -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0-beta1/dist/css/bootstrap.min.css" 
    rel="stylesheet" 
    integrity="sha384-0evHe/X+R7YkIZDRvuzKMRqM+OrBnVFBL6DOitfPri4tjfHxaWutUpFmBp4vmVor" 
    crossorigin="anonymous">

    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.8.2/font/bootstrap-icons.css">
    
    <link rel="stylesheet" href="css/style.css" type="text/css">
    
    <title>Pillbug PDF Breaker</title>
</head>
<body>

    <div class = "top-bar">

        <button class = "btn" id = "prev-page">
            <i class = "bi bi-arrow-left-circle-fill"></i> Previous Page
        </button>

        <button class = "btn" id = "next-page">
            Next Page <i class = "bi bi-arrow-right-circle-fill"></i>
        </button>

        <span class = "page-info">
            Page <span id = "page-num"> 0 </span> of <span id = "page-count"> 0 </span>
        </span>


        <span class = "button">
            <input type="file" name="file" id="fileInput">
            <button class = "btn" type="button"><i class="bi bi-book-fill"></i> Generate</button>
            <button class="btn" type="button" id="uploadBut"><i class="bi bi-file-earmark-text-fill"></i> Plaintext</button>
        </span>
    
    </div>

    <div>
        <textarea class="textBox" id="textRes" placeholder="Plaintext goes here..."></textarea>
    </div>

    <script>
        const fileInput = document.getElementById("fileInput");
        const uploadBut = document.getElementById("uploadBut");
        const textRes = document.getElementById("textRes");

        // retrieve file and send it to server

        uploadBut.addEventListener("click", () => {
            const formData = new FormData();

            formData.append("pdfFile", fileInput.files[0]);

            fetch("/extract-text", {
                method: "POST",
                body: formData
            }).then(response => {
                return response.text();
            }).then(extractedText => {
                textRes.value = extractedText.trim();
            });
        });
    </script>
        

    <canvas id="pdf-render"></canvas>
    <script src="https://mozilla.github.io/pdf.js/build/pdf.js"></script>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    
</body>
</html>