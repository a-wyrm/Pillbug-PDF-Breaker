<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="UTF-8">
    <meta name = "viewport" content = "width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content = "ie=edge">

    <link rel = "stylesheet" href = "https://use.fontawesome.com/releases/v5.7.2/css/all.css" 
    integrity = "sha384-fnmOCqbTlWIlj8LyTjo7mOUStjsKC4pOpQbqyi7RrhN7udi9RwhKkMHpvLbHG9Sr" 
    crossorigin = "anonymous"/>
    
    <link rel="stylesheet" href="css/style.css" type="text/css">
    
    <title>Pillbug PDF Breaker</title>
</head>
<body>

    <div class = "top-bar">

        <button class = "btn" id = "prev-page">
            <i class = "fas fa-arrow-circle-left"></i> Previous Page
        </button>

        <button class = "btn" id = "next-page">
            Next Page <i class = "fas fa-arrow-circle-right"></i>
        </button>

        <span class = "page-info">
            Page <span id = "page-num"></span> of <span id = "page-count"></span>
        </span>

        <span class = "button">
            <input type="file" name="file" id="fileInput">
            <button type="button" id="uploadBut">Upload PDF</button>
        </span>

        <textarea style ="width: 300px; height: 150px;" id="textRes" placeholder="..."></textarea>

        <script>
            const fileInput = document.getElementById("fileInput");
            const uploadBut = document.getElementById("uploadBut");
            const textRes = document.getElementById("textRes");

            // retrieve file and send it to server

            uploadBut.addEventListener("click", () => {
                const formData = new FormData();

                formData.append("pdfFile", fileInput.files[0]);

                fetch("/extract-text", {
                    method: "POST",
                    body: formData
                }).then(response => {
                    return response.text();
                }).then(extractedText => {
                    textRes.value = extractedText.trim();
                });
            });
        </script>
        
    </div>

    <canvas id="pdf-render"></canvas>
    <script src="https://mozilla.github.io/pdf.js/build/pdf.js"></script>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js"></script>
    
</body>
</html>